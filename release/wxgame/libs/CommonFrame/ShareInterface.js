tywx.ShareInterface={OnShareAppMessageInfo:null,shareWithSharePoint:function(e,t,a,r){if(!tywx.PropagateInterface._cachedShareConfig)return null;var n=tywx.PropagateInterface._shuffleByWeights();if(n&&n[e]){var i=n[e];tywx.ShareInterface.share(i.shareContent,i.sharePicUrl,i.sharePointId,i.shareSchemeId,t,a,r)}},setOnShareAppMessageInfoWithSharePoint:function(e){if(tywx.PropagateInterface._cachedShareConfig){var t=tywx.PropagateInterface._shuffleByWeights();if(t&&t[e]){var a=t[e];this.OnShareAppMessageInfo={title:a.shareContent,imageUrl:a.sharePicUrl,sharePointId:a.sharePointId,shareSchemeId:a.shareSchemeId}}}},setOnShareAppMessageInfo:function(e,t,a,r){this.OnShareAppMessageInfo={title:e,imageUrl:t,sharePointId:a,shareSchemeId:r}},getOnShareAppMessageInfo:function(){return this.OnShareAppMessageInfo},getRandomOnShareAppMessageInfo:function(){var e=[];for(var t in tywx.PropagateInterface._cachedShareConfig){var a=tywx.PropagateInterface._cachedShareConfig[t];a.length&&!a[0].template_type&&e.push(t)}if(e&&e.length>0){var r=Math.floor(1e4*Math.random())%e.length,n=e[r],i=tywx.PropagateInterface._cachedShareConfig[n];if(i&&i.length>0){return{title:i[r=Math.floor(1e4*Math.random())%i.length].shareContent,imageUrl:i[r].sharePicUrl,sharePointId:i[r].sharePointId,shareSchemeId:i[r].shareSchemeId}}}return null},share:function(e,t,a,r,n,i,s){try{if(tywx.IsWechatPlatform()){var h=tywx.PropagateInterface._connectConfigInfo[a];tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserShare,[a,1,r,h,"share"]),wx.shareAppMessage({title:e,imageUrl:t,query:"inviteCode="+tywx.UserInfo.userId+"&sourceCode="+a+"&inviteName="+tywx.UserInfo.userName+"&imageType="+r+"&template_type="+h+"&fun_type=share&extraInfo="+(s||""),success:function(e){n&&n(e),tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserShare,[a,2,r,h,"share"]),tywx.SystemInfo.openLocalRecord&&tywx.TuyooSDK.freshLocalShareTimes()},fail:function(e){i&&i(e)},complete:function(){}})}}catch(e){tywx.LOGE("error:","tywx.ShareInterface.share——"+JSON.stringify(e))}},activityShare:function(e,t,a,r){try{var n=e.template_type;n?wx.updateShareMenu({withShareTicket:!0,isUpdatableMessage:!0,activityId:e.activity_id,templateInfo:{parameterList:[{name:"member_count",value:e.user_num_lower.toString()},{name:"room_limit",value:e.user_num_upper.toString()}]},success:function(i){wx.shareAppMessage({title:e.shareContent,imageUrl:e.sharePicUrl,query:"inviteCode="+tywx.UserInfo.userId+"&sourceCode="+e.sharePointId+"&inviteName="+tywx.UserInfo.userName+"&imageType="+e.shareSchemeId+"&template_type="+e.template_type+"&fun_type=activityShare&extraInfo="+(r||""),success:function(a){t&&t(a),tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserShare,[e.sharePointId,2,e.shareSchemeId,n,"activityShare"]),tywx.SystemInfo.openLocalRecord&&tywx.TuyooSDK.freshLocalShareTimes()},fail:function(e){a&&a(e)}}),tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserShare,[e.sharePointId,1,e.shareSchemeId,n,"activityShare"])},fail:function(n){tywx.ShareInterface.share(e.shareContent,e.sharePicUrl,e.sharePointId,e.shareSchemeId,t,a,r)},complete:function(){setTimeout(function(){wx.updateShareMenu({withShareTicket:!0,isUpdatableMessage:!1,activityId:"",templateInfo:{}})},1e3)}}):tywx.ShareInterface.share(e.shareContent,e.sharePicUrl,e.sharePointId,e.shareSchemeId,t,a,r)}catch(e){tywx.LOGE("error:","tywx.ShareInterface.activityShare——"+JSON.stringify(e))}}},tywx.onShareAppMessageInit=function(){try{tywx.IsWechatPlatform()&&wx.onShareAppMessage(function(e){tywx.ShareInterface.setOnShareAppMessageInfoWithSharePoint("defaultSharePoint");var t=tywx.ShareInterface.getOnShareAppMessageInfo();null==t&&(t=tywx.ShareInterface.getRandomOnShareAppMessageInfo()),t=t||{};var a=tywx.PropagateInterface._connectConfigInfo[t.sharePointId];return tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserShare,[t.sharePointId,1,t.shareSchemeId,a,"onShareAppMessage"]),{title:t.title||"",imageUrl:t.imageUrl||"",query:"inviteCode="+tywx.UserInfo.userId+"&sourceCode="+t.sharePointId+"&inviteName="+tywx.UserInfo.userName+"&imageType="+t.shareSchemeId+"&template_type="+a+"&fun_type=onShareAppMessage",success:function(e,r){tywx.BiLog.clickStat(tywx.clickStatEventType.clickStatEventTypeUserShare,[t.sharePointId,2,t.shareSchemeId,a,"onShareAppMessage"]),tywx.SystemInfo.openLocalRecord&&tywx.TuyooSDK.freshLocalShareTimes()},fail:function(){},complete:function(){}}})}catch(e){tywx.LOGE("error:","tywx.ShareInterface.share——"+JSON.stringify(e))}},tywx.onShareAppMessageInit();